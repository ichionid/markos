(window.webpackJsonp=window.webpackJsonp||[]).push([[47,13,14],{379:function(e,t,r){var content=r(382);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(165).default)("1bbe0b6c",content,!0,{sourceMap:!1})},380:function(e,t,r){"use strict";var n=r(3),o=r(97).find,c=r(167),l="find",d=!0;l in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},381:function(e,t,r){"use strict";r(379)},382:function(e,t,r){var n=r(164)(!1);n.push([e.i,"details[data-v-303ab6ed]{border:2px dashed #d3d3d3;margin:.5rem 0;padding:1rem}details[open]>summary[data-v-303ab6ed]{margin-bottom:1rem}",""]),e.exports=n},383:function(e,t,r){"use strict";r.r(t);r(224),r(80);var n={props:{json:{type:[Array,Boolean,Object,Number,String],default:void 0},summary:{type:String,default:"Debug"}},computed:{module:function(e){var t=e.$parent;return"DruxtWrapper"===t.$options._componentTag?t.$parent:t},title:function(e){var t=e.module,summary=e.summary;return t.$options._componentTag?"[".concat(t.$options._componentTag,"] ").concat(summary):summary}}},o=n,c=(r(381),r(29)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$nuxt.context.isDev?r("details",[r("summary",{domProps:{textContent:e._s(e.title)}}),e._v(" "),e.json?r("pre",[r("code",[e._v(e._s(JSON.stringify(e.json,null,"  ")))])]):e._e(),e._v(" "),e._t("default")],2):r("div")}),[],!1,null,"303ab6ed",null);t.default=component.exports},384:function(e,t,r){"use strict";r.r(t);r(43),r(36),r(56),r(37),r(57),r(58),r(39),r(59),r(40),r(60),r(61),r(38);var n=r(24),o=r(10),c=r(81),l=r(26),d=(r(50),r(42),r(18),r(96),r(80),r(163),r(380),r(51),r(34),r(161),r(166),r(62)),f=r.n(d),m=r(23),y=r(383),h=r(160),v=r(30);function x(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={name:"DruxtEntity",components:{DruxtDebug:y.default},extends:h.default,props:{mode:{type:String,default:"default"},settings:{type:Object,default:function(){return{}}},schemaType:{type:String,default:void 0},type:{type:String,required:!0},uuid:{type:[Boolean,String],default:!1}},data:function(e){return{model:k({attributes:{},relationships:{},included:void 0,type:e.type},e.value),schema:null}},fetchKey:function(e){var t=["DruxtEntity",this.type,this.uuid,this.mode,this.schemaType].filter((function(e){return e}));return[].concat(Object(c.a)(t),[e(t.join(":"))]).join(":")},computed:{entity:function(e){return k({},e.model)},fields:function(e){var t=e.errors,r=e.isEmpty,n=e.model,o=e.schema,c=e.schemaType;if(!o)return!1;var l,d={},f=x(o.fields||[]);try{var m=function(){var e=l.value,f=!!((e.settings||{}).storage||{}).target_type||!!(n.relationships||{})[e.id],m=f?((n||{}).relationships||{})[e.id]:((n||{}).attributes||{})[e.id];if("form"!==c&&r(m))return"continue";d[e.id]={id:e.id,data:m,errors:(t||[]).filter((function(t){return((t.source||{}).pointer||"").startsWith("/data/attributes/".concat(e.id))})),relationship:f,schema:k({config:o.config},e),value:m}};for(f.s();!(l=f.n()).done;)m()}catch(e){f.e(e)}finally{f.f()}return d}},watch:{mode:function(){this.$fetch()},schemaType:function(){this.$fetch()},type:function(){this.$fetch()},uuid:function(){this.$fetch()}},methods:k({getQuery:function(e){var t=new m.DrupalJsonApiParams;e.query.include&&Array.isArray(e.query.include)&&t.addInclude(e.query.include);var r=[];if(e.query.fields&&Array.isArray(e.query.fields))if(0===e.query.fields.length||"string"==typeof e.query.fields[0]||void 0===e.query.fields[0])r=e.query.fields;else if(Array.isArray(e.query.fields[0])){r=e.query.fields.find((function(a){return 0===a.length||"string"==typeof Object(c.a)(a).pop()||void 0===Object(c.a)(a).pop()}))||[];var n,o=x(e.query.fields.filter((function(a){return 2==a.length&&"string"==typeof a[0]&&Array.isArray(a[1])})));try{for(o.s();!(n=o.n()).done;){var l=n.value;t.addFields(l[0],l[1])}}catch(e){o.e(e)}finally{o.f()}}return e.query.schema&&(r=[].concat(Object(c.a)(((this.schema||{}).fields||[]).map((function(e){return e.id}))),Object(c.a)(r))),r.length&&t.addFields(this.type,r),t},isEmpty:function(e){return void 0===e||(!e||(!(!Array.isArray(e.data)||e.data.length)||void 0!==e.data&&!e.data))}},Object(v.b)({getResource:"druxt/getResource",getSchema:"druxtSchema/get"})),druxt:{componentOptions:function(e){var t=e.mode,r=e.schema,n=e.schemaType,o=e.type;return[[(r||{}).resourceType||o,((r||{}).config||{}).mode||t,((r||{}).config||{}).schemaType||n||"view"],[((r||{}).resourceType||o||"").split("--").shift(),((r||{}).config||{}).mode||t,((r||{}).config||{}).schemaType||n||"view"],[((r||{}).config||{}).mode||t]]},fetchConfig:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getSchema({resourceType:e.type,mode:e.mode,schemaType:e.schemaType||"view"});case 3:e.schema=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},fetchData:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.type){r.next=2;break}return r.abrupt("return");case 2:if("view"!==(t.schemaType||"view")||t.uuid||t.value){r.next=4;break}throw new Error("Missing required props: uuid.");case 4:if(!t.uuid||t.value){r.next=12;break}return n=t.getQuery(e),r.next=8,t.getResource({type:t.type,id:t.uuid,query:n});case 8:o=r.sent,(c=k({},o.data||{})).included=o.included,t.model=JSON.parse(JSON.stringify(c||{}));case 12:case"end":return r.stop()}}),r)})))()},propsData:function(e){var t=e.fields,r=e.model;return{entity:r,fields:t,schema:e.schema,value:r}},settings:function(e,t){var r=e.$druxt,n=e.settings,o=f()(r.settings.entity||{},t,{arrayMerge:function(e,t){return t}});return{query:(o=f()(o||{},n,{arrayMerge:function(e,t){return t}})).query||{}}},slots:function(e){var t=this,r={};return this.schema?(Object.entries(this.fields).map((function(o){var c=Object(n.a)(o,2),l=c[0],d=c[1];r[l]=function(r){return e("DruxtField",{attrs:r,key:l,props:d,on:{input:function(e){var r=d.relationship?"relationships":"attributes";t.model[r][l]=e,t.$emit("input",t.model)}},ref:l})}})),r.default=function(e){return Object.entries(t.fields).map((function(t){var o=Object(n.a)(t,1)[0];return r[o](e)}))},r):(r.debug=function(){return e("DruxtDebug",{props:{summary:"Missing schema for '".concat(t.type,"--").concat(t.mode,"'")}},[e("label",["Component options:",e("ul",t.component.options.map((function(s){return e("li",[s])})))]),e("label",["Entity:",e("pre",[JSON.stringify(t.entity,null,"  ")])])])},r)}}},D=r(29),component=Object(D.a)(w,undefined,undefined,!1,null,null,null);t.default=component.exports},385:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return m}));var n=r(8),o=r(23),c=r(25);const l=e=>e.map((e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," "))).join("/");async function d({stories:t}){const{addTemplate:r,options:d}=this,f=new c.a(d.druxt.baseUrl,{...d.druxt,proxy:{api:!1}}),m=(new o.DrupalJsonApiParams).addFilter("status",!0),y=(await f.getCollectionAll("block--block",m)).map((e=>e.data)).flat(),h=Array.from(new Set(y.map((e=>e.attributes.theme))));r({src:Object(n.resolve)(e,"../templates/druxt-block.stories.js"),fileName:"stories/druxt-block.stories.js",options:{blocks:y}}),y.forEach((t=>{r({src:Object(n.resolve)(e,"../templates/druxt-block.instance.stories.js"),fileName:`stories/druxt-block.${t.attributes.drupal_internal__id}.stories.js`,options:{block:t,title:l(["Druxt","Blocks",t.attributes.theme,t.attributes.region,t.attributes.drupal_internal__id])}})})),r({src:Object(n.resolve)(e,"../templates/druxt-block-region.stories.js"),fileName:"stories/druxt-block-region.stories.js",options:{regions:Array.from(new Set(y.map((e=>e.attributes.region)))),themes:h}}),h.forEach((t=>{Array.from(new Set(y.filter((e=>e.attributes.theme===t)).map((e=>e.attributes.region)))).forEach((o=>{r({src:Object(n.resolve)(e,"../templates/druxt-block-region.instance.stories.js"),fileName:`stories/druxt-block-region.${t}.${o}.stories.js`,options:{region:o,title:l(["Druxt","Blocks",t,o]),theme:t}})}))})),t.push(Object(n.resolve)(d.buildDir,"./stories/druxt-block.stories.js")),t.push(Object(n.resolve)(d.buildDir,"./stories/druxt-block-region.stories.js")),t.push(Object(n.resolve)(d.buildDir,"./stories/druxt-block.*.stories.js")),t.push(Object(n.resolve)(d.buildDir,"./stories/druxt-block-region.*.stories.js"))}const f=function(t={}){const r={baseUrl:t.baseUrl,...(this.options||{}).druxt||{},blocks:{query:{},...((this.options||{}).druxt||{}).site,...t}};this.addModule(["druxt",r]),this.nuxt.hook("components:dirs",(t=>{t.push({path:Object(n.join)(e,"components")}),t.push({path:Object(n.join)(e,"components/blocks")})})),this.nuxt.hook("storybook:config",(async({stories:e})=>{await d.call(this,{stories:e})}))};f.meta=r(386);const m={props:{block:{type:Object,require:!0}},computed:{settings(){return this.block.attributes.settings}}}}).call(this,"/")},386:function(e){e.exports=JSON.parse('{"name":"druxt-blocks","version":"0.15.2","description":"Drupal Block and Block Region Druxt components.","keywords":["block","blocks","cms","decoupled","drupal","druxt","druxtjs","headless","jsonapi","json:api","nuxt","nuxtjs","module","storybook","vue"],"homepage":"https://druxtjs.org","bugs":{"url":"https://github.com/druxt/druxt.js/issues"},"repository":{"type":"git","url":"git+https://github.com/druxt/druxt.js"},"license":"MIT","exports":{".":{"require":"./dist/druxt-blocks.ssr.js","import":"./dist/druxt-blocks.esm.js"},"./components/*":"./dist/components/*"},"main":"dist/druxt-blocks.ssr.js","module":"dist/druxt-blocks.esm.js","files":["dist","templates"],"dependencies":{"axios":"^0.21.1","drupal-jsonapi-params":"^2.0.0","druxt":"^0.18.2","druxt-entity":"^0.24.3","druxt-router":"^0.26.1"},"optionalDependencies":{"vue":"^2.6.14","vuex":"^3.6.2"},"publishConfig":{"access":"public"}}')},408:function(e,t,r){"use strict";r.r(t);var n=r(10),o=(r(34),r(161),r(80),r(50),r(23)),c={name:"DruxtBlockBlockContent",mixins:[r(385).a],fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("druxt/getResource",{type:e.block.type,id:e.block.id,query:(new o.DrupalJsonApiParams).addFields(e.block.type,["dependencies"])});case 2:case"end":return t.stop()}}),t)})))()},computed:{propsData:function(e){var t=e.$fetchState,r=e.$store,n=e.block;if(t.pending)return!1;var o=r.state.druxt.resources[n.type][n.id];if(!o.data.attributes.dependencies)return!1;var c=o.data.attributes.dependencies.content[0].split(":");return{key:o.data.attributes.dependencies.content[0],type:"".concat(c[0],"--").concat(c[1]),uuid:c[2]}}}},l=r(29),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.$fetchState.pending?e._e():r("DruxtEntity",e._b({},"DruxtEntity",e.propsData,!1))],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DruxtEntity:r(384).default})}}]);