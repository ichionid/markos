(window.webpackJsonp=window.webpackJsonp||[]).push([[48,13,14],{379:function(e,t,r){var content=r(382);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(165).default)("1bbe0b6c",content,!0,{sourceMap:!1})},380:function(e,t,r){"use strict";var n=r(3),o=r(97).find,c=r(167),f="find",d=!0;f in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(f)},381:function(e,t,r){"use strict";r(379)},382:function(e,t,r){var n=r(164)(!1);n.push([e.i,"details[data-v-303ab6ed]{border:2px dashed #d3d3d3;margin:.5rem 0;padding:1rem}details[open]>summary[data-v-303ab6ed]{margin-bottom:1rem}",""]),e.exports=n},383:function(e,t,r){"use strict";r.r(t);r(224),r(80);var n={props:{json:{type:[Array,Boolean,Object,Number,String],default:void 0},summary:{type:String,default:"Debug"}},computed:{module:function(e){var t=e.$parent;return"DruxtWrapper"===t.$options._componentTag?t.$parent:t},title:function(e){var t=e.module,summary=e.summary;return t.$options._componentTag?"[".concat(t.$options._componentTag,"] ").concat(summary):summary}}},o=n,c=(r(381),r(29)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$nuxt.context.isDev?r("details",[r("summary",{domProps:{textContent:e._s(e.title)}}),e._v(" "),e.json?r("pre",[r("code",[e._v(e._s(JSON.stringify(e.json,null,"  ")))])]):e._e(),e._v(" "),e._t("default")],2):r("div")}),[],!1,null,"303ab6ed",null);t.default=component.exports},384:function(e,t,r){"use strict";r.r(t);r(43),r(36),r(56),r(37),r(57),r(58),r(39),r(59),r(40),r(60),r(61),r(38);var n=r(24),o=r(10),c=r(81),f=r(26),d=(r(50),r(42),r(18),r(96),r(80),r(163),r(380),r(51),r(34),r(161),r(166),r(62)),l=r.n(d),y=r(23),m=r(383),h=r(160),v=r(30);function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){f=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(f)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(f.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S={name:"DruxtEntity",components:{DruxtDebug:m.default},extends:h.default,props:{mode:{type:String,default:"default"},settings:{type:Object,default:function(){return{}}},schemaType:{type:String,default:void 0},type:{type:String,required:!0},uuid:{type:[Boolean,String],default:!1}},data:function(e){return{model:w({attributes:{},relationships:{},included:void 0,type:e.type},e.value),schema:null}},fetchKey:function(e){var t=["DruxtEntity",this.type,this.uuid,this.mode,this.schemaType].filter((function(e){return e}));return[].concat(Object(c.a)(t),[e(t.join(":"))]).join(":")},computed:{entity:function(e){return w({},e.model)},fields:function(e){var t=e.errors,r=e.isEmpty,n=e.model,o=e.schema,c=e.schemaType;if(!o)return!1;var f,d={},l=O(o.fields||[]);try{var y=function(){var e=f.value,l=!!((e.settings||{}).storage||{}).target_type||!!(n.relationships||{})[e.id],y=l?((n||{}).relationships||{})[e.id]:((n||{}).attributes||{})[e.id];if("form"!==c&&r(y))return"continue";d[e.id]={id:e.id,data:y,errors:(t||[]).filter((function(t){return((t.source||{}).pointer||"").startsWith("/data/attributes/".concat(e.id))})),relationship:l,schema:w({config:o.config},e),value:y}};for(l.s();!(f=l.n()).done;)y()}catch(e){l.e(e)}finally{l.f()}return d}},watch:{mode:function(){this.$fetch()},schemaType:function(){this.$fetch()},type:function(){this.$fetch()},uuid:function(){this.$fetch()}},methods:w({getQuery:function(e){var t=new y.DrupalJsonApiParams;e.query.include&&Array.isArray(e.query.include)&&t.addInclude(e.query.include);var r=[];if(e.query.fields&&Array.isArray(e.query.fields))if(0===e.query.fields.length||"string"==typeof e.query.fields[0]||void 0===e.query.fields[0])r=e.query.fields;else if(Array.isArray(e.query.fields[0])){r=e.query.fields.find((function(a){return 0===a.length||"string"==typeof Object(c.a)(a).pop()||void 0===Object(c.a)(a).pop()}))||[];var n,o=O(e.query.fields.filter((function(a){return 2==a.length&&"string"==typeof a[0]&&Array.isArray(a[1])})));try{for(o.s();!(n=o.n()).done;){var f=n.value;t.addFields(f[0],f[1])}}catch(e){o.e(e)}finally{o.f()}}return e.query.schema&&(r=[].concat(Object(c.a)(((this.schema||{}).fields||[]).map((function(e){return e.id}))),Object(c.a)(r))),r.length&&t.addFields(this.type,r),t},isEmpty:function(e){return void 0===e||(!e||(!(!Array.isArray(e.data)||e.data.length)||void 0!==e.data&&!e.data))}},Object(v.b)({getResource:"druxt/getResource",getSchema:"druxtSchema/get"})),druxt:{componentOptions:function(e){var t=e.mode,r=e.schema,n=e.schemaType,o=e.type;return[[(r||{}).resourceType||o,((r||{}).config||{}).mode||t,((r||{}).config||{}).schemaType||n||"view"],[((r||{}).resourceType||o||"").split("--").shift(),((r||{}).config||{}).mode||t,((r||{}).config||{}).schemaType||n||"view"],[((r||{}).config||{}).mode||t]]},fetchConfig:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getSchema({resourceType:e.type,mode:e.mode,schemaType:e.schemaType||"view"});case 3:e.schema=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},fetchData:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.type){r.next=2;break}return r.abrupt("return");case 2:if("view"!==(t.schemaType||"view")||t.uuid||t.value){r.next=4;break}throw new Error("Missing required props: uuid.");case 4:if(!t.uuid||t.value){r.next=12;break}return n=t.getQuery(e),r.next=8,t.getResource({type:t.type,id:t.uuid,query:n});case 8:o=r.sent,(c=w({},o.data||{})).included=o.included,t.model=JSON.parse(JSON.stringify(c||{}));case 12:case"end":return r.stop()}}),r)})))()},propsData:function(e){var t=e.fields,r=e.model;return{entity:r,fields:t,schema:e.schema,value:r}},settings:function(e,t){var r=e.$druxt,n=e.settings,o=l()(r.settings.entity||{},t,{arrayMerge:function(e,t){return t}});return{query:(o=l()(o||{},n,{arrayMerge:function(e,t){return t}})).query||{}}},slots:function(e){var t=this,r={};return this.schema?(Object.entries(this.fields).map((function(o){var c=Object(n.a)(o,2),f=c[0],d=c[1];r[f]=function(r){return e("DruxtField",{attrs:r,key:f,props:d,on:{input:function(e){var r=d.relationship?"relationships":"attributes";t.model[r][f]=e,t.$emit("input",t.model)}},ref:f})}})),r.default=function(e){return Object.entries(t.fields).map((function(t){var o=Object(n.a)(t,1)[0];return r[o](e)}))},r):(r.debug=function(){return e("DruxtDebug",{props:{summary:"Missing schema for '".concat(t.type,"--").concat(t.mode,"'")}},[e("label",["Component options:",e("ul",t.component.options.map((function(s){return e("li",[s])})))]),e("label",["Entity:",e("pre",[JSON.stringify(t.entity,null,"  ")])])])},r)}}},D=r(29),component=Object(D.a)(S,undefined,undefined,!1,null,null,null);t.default=component.exports},432:function(e,t,r){"use strict";r.r(t);r(43),r(36),r(42),r(18),r(56),r(37),r(57);var n=r(24),o=r(81),c=r(26),f=r(10),d=(r(80),r(51),r(166),r(50),r(384));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={name:"DruxtEntityForm",extends:d.default,props:{schemaType:{type:String,default:"form"}},data:function(){return{response:void 0,submitting:!1}},computed:{errors:function(e){return(e.response||{}).errors}},methods:{onReset:function(){this.model=JSON.parse(JSON.stringify(this.entity)),this.response=void 0,this.$emit("reset")},onSubmit:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.submitting){t.next=2;break}return t.abrupt("return",!1);case 2:return e.submitting=!0,r="createResource",e.model.id&&(r="updateResource"),t.prev=5,t.next=8,e.$druxt[r](e.model);case 8:e.response=t.sent,n=e.response.data.data,e.$store.commit("druxt/addResource",{resource:n}),e.$emit("submit",n),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),e.response=t.t0.response.data,e.$emit("error",e.response);case 18:e.submitting=!1;case 19:case"end":return t.stop()}}),t,null,[[5,14]])})))()}},druxt:y(y({},d.default.druxt),{},{slots:function(e){var t=this,r=d.default.druxt.slots.call(this,e);return r.buttons=function(r){return e("DruxtEntityFormButtons",{attrs:r,on:{reset:t.onReset,submit:t.onSubmit},props:{schema:t.schema||{}},ref:"buttons"})},r.default=function(e){return[].concat(Object(o.a)(Object.entries(t.fields).map((function(t){var o=Object(n.a)(t,1)[0];return r[o](e)}))),[r.buttons(e)])},r}})},h=r(29),component=Object(h.a)(m,undefined,undefined,!1,null,null,null);t.default=component.exports}}]);